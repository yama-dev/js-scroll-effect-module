/*! @yama-dev/js-scroll-effect-module Version 0.13.0 Repository https://github.com/yama-dev/js-scroll-effect-module Copyright yama-dev Licensed MIT */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SCROLL_EFFECT_MODULE=e():t.SCROLL_EFFECT_MODULE=e()}(self,(function(){return function(){"use strict";var t={d:function(e,n){for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};function n(t){try{return t instanceof HTMLElement}catch(t){return!1}}function i(t,e){if(e){var o,a=i(t),s=[];return!!a&&(a.map((function(t){if(!(o=n(e)?Array.prototype.slice.call(t.querySelectorAll(e.tagName.toLowerCase())):Array.prototype.slice.call(t.querySelectorAll(e))))return!1;s=s.concat(o)})),s)}if(!t)return!1;var r;if(!Array.isArray(t)&&!t.length||function(t){try{return"string"==typeof t}catch(t){return!1}}(t))r=n(t)?Array(t):Array.prototype.slice.call(document.querySelectorAll(t));else{if(!n(t[0]))return!1;r=Array.prototype.slice.call(t)}return 0===r.length&&(r=null),r}function o(t,e){return n(t)?t.classList.contains(e):document.querySelector(t).classList.contains(e)}function a(t,e){var n=i(t);if(!n)return!1;n.map((function(t){t.classList.remove(e)}))}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.d(e,{default:function(){return u}});var u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,t),this.state={NumScrolltopPre:window.pageYOffset,NumScrolltop:window.pageYOffset,PosList:[],PosListFixPre:[]};var n={target:null,classNameInview:"is-active",displayRatio:.8,displayReverse:!1,displayRatioReverse:null,firstDelay:100,throttleInterval:3,autoStart:!0,on:{Scroll:null,Change:null,In:null,Out:null}};this.config=r(r({},n),e),this.config.displayRatioReverse?this.config.displayRatioReverse<this.config.displayRatio&&(this.config.displayRatioReverse=this.config.displayRatio):this.config.displayRatioReverse=this.config.displayRatio,this.config.autoStart&&this.Init()}var e,n,s;return e=t,(n=[{key:"Init",value:function(){var t=this;"complete"==document.readyState||"interactive"==document.readyState?(this.Update(),this._BindEvent()):document.addEventListener("DOMContentLoaded",(function(){t.Update(),t._BindEvent()}))}},{key:"Start",value:function(){this.Stop(),this.Update(),this._StoreElementStateAtPosList()}},{key:"Update",value:function(){this._CacheDom(),this._CacheDomSize(),this._SetDom()}},{key:"Stop",value:function(){var t=this;this.state.PosList.map((function(e,n){e.active=!1,a(e.el,t.config.classNameInview)})),this.state.PosList=[]}},{key:"_BindEvent",value:function(){var t,e,n,i=this,o=this;window.addEventListener("resize",(function(){i.Update()})),window.addEventListener("load",(function(){i.Update()})),setTimeout((function(){i._StoreElementStateAtPosList()}),this.config.firstDelay),window.addEventListener("scroll",(t=function(){o._StoreElementStateAtPosList()},e=this.config.throttleInterval,n=Date.now(),function(){n+e-Date.now()<0&&(t(),n=Date.now())}),{passive:!0})}},{key:"_CacheDom",value:function(){this.$targetElements=i(this.config.target)}},{key:"_CacheDomSize",value:function(){this.NumWindowHeight=window.innerHeight}},{key:"_SetDom",value:function(){var t=this;this.state.PosList=[],this.state.NumScrolltop=window.pageYOffset;var e=i(this.$targetElements);e&&e.map((function(e,n){var i=0;e.dataset&&void 0!==e.dataset.semOffset&&(i=Number(e.dataset.semOffset));var o={el:e,index:n,pos:e.getBoundingClientRect().top+t.state.NumScrolltop-i,height:e.clientHeight,height2:e.offsetHeight,count:0,active:!1,changing:!1,dataset:e.dataset};t.state.PosList.push(o)}))}},{key:"_StoreElementStateAtPosList",value:function(){var t=this;if(!this.state.PosList.length)return!1;this.state.NumScrolltop=window.pageYOffset,this.state.PosList.map((function(e){t.config.displayRatio===t.config.displayRatioReverse&&(t.state.NumScrolltop+t.NumWindowHeight*t.config.displayRatio>e.pos?e.active||(e.changing=!0,e.active=!0):e.active&&(e.changing=!0,e.active=!1)),t.config.displayRatio!==t.config.displayRatioReverse&&(t.state.NumScrolltop+t.NumWindowHeight*t.config.displayRatio>e.pos||t.state.NumScrolltop+t.NumWindowHeight*t.config.displayRatioReverse>e.pos&&e.active?e.active||(e.changing=!0,e.active=!0):e.active&&(e.changing=!0,e.active=!1))})),this.state.PosList.filter((function(t){return!0===t.changing})).length&&this._ActionChange(),this.config.on.Scroll&&"function"==typeof this.config.on.Scroll&&this.config.on.Scroll(this.state.NumScrolltop),this.state.NumScrolltopPre=this.state.NumScrolltop,this.state.PosListFixPre=this.state.PosListFix}},{key:"_ActionChange",value:function(){var t=this;if(!this.state.PosList.length)return!1;this.state.PosList.map((function(e){e.active?o(e.el,t.config.classNameInview)||(e.count++,t.config.classNameInview&&function(t,e){var n=i(t);if(!n)return!1;n.map((function(t){t.classList.add(e)}))}(e.el,t.config.classNameInview),t.config.on.In&&"function"==typeof t.config.on.In&&t.config.on.In(e)):t.config.displayReverse&&o(e.el,t.config.classNameInview)&&(a(e.el,t.config.classNameInview),t.config.on.Out&&"function"==typeof t.config.on.Out&&t.config.on.Out(e)),e.changing&&(e.changing=!1,t.config.on.Change&&"function"==typeof t.config.on.Change&&t.config.on.Change(e,e.index,e.dataset.scrollName))}))}}])&&f(e.prototype,n),s&&f(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}();return e=e.default}()}));